!function(e){function o(o){"use strict";var i=e(o),r=["powermail_input","powermail_textarea","powermail_select","powermail_radio","powermail_checkbox"];this.ajaxListener=function(){n(),e(f()).on("change",function(){n()})};var n=function(){var o=e(i.get(0)),r=o.find(":disabled").prop("disabled",!1),n=new FormData(i.get(0));o.find('input[type="file"]').map(function(e,o){n.delete(o.name)}),r.prop("disabled",!0),e.ajax({type:"POST",url:p(),data:n,contentType:!1,processData:!1,success:function(o){100===o.loops&&_("100 loops reached by parsing conditions and rules. Maybe there are conflicting conditions."),function(o){if(void 0!==o.todo){for(var i in o.todo){var r=e(".powermail_form_"+i);for(var n in o.todo[i]){r.find(".powermail_fieldset_"+n),"hide"===o.todo[i][n]["#action"]&&u(l(n,r)),"un_hide"===o.todo[i][n]["#action"]&&d(l(n,r));for(var p in o.todo[i][n])"hide"===o.todo[i][n][p]["#action"]&&a(p,r),"un_hide"===o.todo[i][n][p]["#action"]&&t(p,r)}}w()}}(o)}})},t=function(e,o){o.find(".powermail_fieldwrap_"+e).show();var i,r=c(e,o);r.prop("disabled",!1),"required"===(i=r).data("powermailcond-required")&&(m()?i.prop("required","required"):s()&&i.prop("required","required")),i.removeData("powermailcond-required")},a=function(e,o){o.find(".powermail_fieldwrap_"+e).hide();var i,r=c(e,o);r.prop("disabled",!0),((i=r).prop("required")||i.data("parsley-required"))&&(i.prop("required",!1),i.removeAttr("data-parsley-required"),i.data("powermailcond-required","required"))},d=function(e){e.show()},u=function(e){e.hide()},p=function(){var o=e("*[data-condition-uri]").data("condition-uri");return void 0===o&&_("Tag with data-condition-uri not found. Maybe TypoScript was not included."),o},c=function(e,o){return o.find('[name^="tx_powermail_pi1[field]['+e+']"]').not('[type="hidden"]')},l=function(e,o){return o.find(".powermail_fieldset_"+e)},f=function(){return function(e,o,i){o=void 0!==o?o:"",i=void 0!==i?i:",";for(var r="",n=0;n<e.length;n++)n>0&&(r+=i),r+=o+e[n];return r}(r,".")},s=function(){return"data-parsley-validate"===i.data("parsley-validate")},m=function(){return"html5"===i.data("validate")},w=function(){s()&&(i.parsley().destroy(),i.parsley())},_=function(e){"object"==typeof console&&("string"==typeof e&&(e="powermail_cond: "+e),console.log(e))}}e(document).ready(function(){e("form.powermail_form").each(function(){new o(this).ajaxListener()})})}(jQuery);